<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap-theme.min.css">
<link rel="stylesheet" type="text/css" href="/stylesheets/web/base.css">
<link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrapValidator.min.css" />
<style type="text/css">
.btn-theme{
	background:#5AB4F5;
	font-weight:700 !important;
	color:#fff;
}
.btn-theme-cancel{
	background:#D9534F;
	font-weight:700 !important;
	color:#fff;
}
.leftLabel {
    text-align: right;
    line-height: 34px;
}
</style>
</head>

<body>
	<div class="container" style="margin-top:4%;">
		<div class="row">
			<div class="col-md-6 col-md-offset-3">
				<form action="/admin_class/doModifyClass" method="post" class="form-horizontal" role="form" id="modifyClass">
					<div class="form-group">
						<label class="col-md-3 leftLabel">学生人数：</label>
						<div class="col-md-8">
							<input type="text" class="form-control" name="studentNumber" value="<%=studentNumber%>">
						</div>
					</div>
					<!--end form-group-->
					<div class="form-group">
						<label class="col-md-3 leftLabel">班主任姓名:</label>
						<div class="col-md-8">
							<select class="form-control" name="teacherName" >
							</select>
						</div>
					</div>
				<div class="form-group">
					<label class="col-md-5"></label>
					<input type="submit" class="btn btn-theme" value="提交" id="submitBtn" >
					<input type="button" class="btn btn-theme-cancel" value="返回" id="back">
				</div>

                <input type="hidden" value="<%=hiddenId%>" id="hiddenId" name="hiddenId">
                <input type="hidden" value="<%=teacherName%>" id="getTeacherName">
				</form>
				<!--end form-->
			</div>
		</div>
	</div> 
<!--end container-->


<script type="text/javascript" src="/bootstrap/js/jquery.min.js"></script>
<script type="text/javascript" src="/layer/layer.js"></script>
<!-- Bootstrap Core JavaScript -->
<script type="text/javascript" src="/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/bootstrap/js/bootstrapValidator.min.js?v=1.0"></script>
<script type="text/javascript">

$(function(){	
	/**页面初始化 */
	getTeacherName();

	$("#back").click(function(){
			location.href='/admin_class/getClass';
	});
})//end ready

	function getTeacherName(){
        var tn=$("#getTeacherName").val();
		var html='';
		$.ajax({
			type:'post',
			dataType:'json',
			url:'/admin_class/getTeacherNames',
			success:function(data){
				if(data.length>0){
					for(var i in data){
                        if(data[i].name==tn){
                            html+='<option value="'+data[i].name+'" selected>'+data[i].name+'</option>';
                        } 
                        else{
                            html+='<option value="'+data[i].name+'">'+data[i].name+'</option>';
                        }
					}
					$("select[name='teacherName']").append(html);
				}

			},error:function(data){
				layer.alert('教师信息加载失败');
			}

		})
	}
$(function(){
	//bootstrap校验
	$("#modifyClass").bootstrapValidator({
            message: '信息有误',
            feedbackIcons: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            live: "disabled",
            fields: {
				studentNumber:{
					validators:{
						notEmpty:{
							message:'学生人数不能为空'
						},
                        stringLength: {
                            min: 1,
                            max: 3,
                            message: '最多三位数'
                        },
                        regexp: {
                            regexp: /^[0-9]+$/,
                            message: '学生人数只能由数字组成'
                        }
					}
				},
				teacherName:{
					validators:{
						notEmpty:{
							message:'班主任姓名不能为空'
						}
					}
				}
            }
        });//end validator
	});//end ready

	// $('#submitBtn').click(function() {
	// 	$('#addClass').bootstrapValidator('validate');
	// });
</script>

</body>

</html>